(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd851f7e"],{"0d02":function(e,t,a){},"438b":function(e,t,a){},6248:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"leftRight"},[a("div",{staticClass:"left"},[a("treeGroup")],1),a("div",{staticClass:"right"},[a("peopleGroup")],1)])},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消选中",placement:"bottom"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-close",circle:""},on:{click:e.handleClose}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加",placement:"bottom"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:e.handleAdd}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"bottom"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:e.handleUpdate}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"bottom"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.handleDalete}})],1)],1),a("div",{staticClass:"bottom"},[a("el-tree",{key:e.treeKey,ref:"tree",attrs:{data:e.data,props:e.defaultProps,"highlight-current":!0,"node-key":"id","default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"群组名称",prop:"groupName"}},[a("el-input",{attrs:{maxlength:10,placeholder:"请输入群组名称"},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFun}},[e._v("确 定")])],1)],1)],1)},i=[];let s=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e),"");var n={name:"TreeGroup",data:function(){return{treeKey:1,data:[{id:1,label:"县区局",group:"县区局",children:[{id:2,label:"临翔区",group:"县区局->临翔区"},{id:3,label:"云县",group:"县区局->云县"},{id:4,label:"凤庆县",group:"县区局->凤庆县"},{id:5,label:"永德县",group:"县区局->永德县"},{id:6,label:"镇康县",group:"县区局->镇康县"},{id:7,label:"耿马县",group:"县区局->耿马县"},{id:8,label:"沧源县",group:"县区局->沧源县"},{id:9,label:"双江县",group:"县区局->双江县"}]},{id:10,label:"水电站",group:"水电站",children:[{id:11,label:"南片河流域",group:"水电站->南片河流域"},{id:12,label:"南袜河流域",group:"水电站->南袜河流域"}]}],defaultProps:{children:"children",label:"label"},dialogStatus:"添加一级群组",dialogVisible:!1,form:{groupName:""},rules:{groupName:[{required:!0,message:"群组名称不能为空",trigger:"blur"}]}}},methods:{handleNodeClick:function(e){this.selectNodeName=e.label,this.selectNodeId=e.id,this.selectChild=!!e.children&&0!=e.children.length,this.$bus.$emit("setGroupData",e.group)},handleAdd:function(){this.form={groupName:""};var e=this.$refs.tree.getCurrentKey();this.dialogStatus=e?"添加".concat(this.selectNodeName,"下的群组"):"添加一级群组",this.dialogType="添加",this.dialogVisible=!0},handleUpdate:function(){var e=this.$refs.tree.getCurrentKey();e?(this.form={groupName:this.selectNodeName},this.dialogStatus="修改".concat(this.selectNodeName,"的群组名称"),this.dialogType="修改",this.dialogVisible=!0):this.$message.error("请点击选中要修改名称的群组")},handleClose:function(){this.$refs.tree.setCurrentKey(null),this.$bus.$emit("setGroupData","")},handleFun:function(){var e=this;this.$refs.form.validate((function(t){if(t){if("添加"==e.dialogType){var a=e.$refs.tree.getCurrentKey(),l={id:s(),label:e.form.groupName},o=e.data[0]["id"];a?(o=e.selectNodeId,e.$refs.tree.append(l,o)):e.$refs.tree.insertBefore(l,o),e.$message.success("添加成功")}else e.$refs.tree.getNode(e.selectNodeId).data.label=e.form.groupName,e.$message.success("修改成功");e.dialogVisible=!1}}))},handleDalete:function(){var e=this,t=this.$refs.tree.getCurrentKey();t?this.selectChild?this.$message.error("该群组下还有子群组不能直接删除，请先删除子群组之后，再进行删除"):this.$confirm("确定要删除".concat(this.selectNodeName,"这个群组吗？确定删除之后该群组下的人员信息也将一起删除！"),"提示",{type:"warning"}).then((function(){e.$refs.tree.remove(e.selectNodeId),e.$message.success("删除成功"),e.$bus.$emit("deleteTableData",e.selectNodeName)})):this.$message.error("请点击选中要删除的群组")}}},c=n,u=(a("9a41"),a("2877")),d=Object(u["a"])(c,r,i,!1,null,"43215335",null),p=d.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box_card"},[a("div",{staticClass:"header"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v(" 姓名："),a("el-input",{staticStyle:{display:"inline-block",width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.getData}},[e._v("查询")]),a("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.handleAdd}},[e._v("添加")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{size:"medium"}},[e._v("导入")]),a("el-button",{attrs:{size:"medium"}},[e._v("导出")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","header-cell-style":{fontSize:"14px"},"cell-style":{fontSize:"14px"}}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.currentPage-1)*e.pageSize+1)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"mail",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"state",label:"接收状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.row.state,callback:function(a){e.$set(t.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{prop:"group",label:"所属群组"}}),a("el-table-column",{attrs:{prop:"date",label:"添加时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"warning",attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,e.tableData)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{type:"tel",placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{attrs:{type:"mail",placeholder:"请输入邮箱"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),a("el-form-item",{attrs:{label:"接收状态",prop:"state"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1),a("el-form-item",{attrs:{label:"所属群组",prop:"group"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFun}},[e._v("确 定")])],1)],1)],1)},f=[],h=(a("d3b7"),a("159b"),a("caad"),a("2532"),a("b0c0"),a("a434"),a("ed08")),g={name:"PropleGroup",data:function(){return{name:"",currentPage:1,pageSize:10,tableData:[],allData:[{date:"2022-06-02",name:"张三",phone:"17710257897",mail:"886404053@qq.com",state:!0,group:"县区局->临翔区"},{date:"2022-05-04",name:"李四",phone:"15712276824",mail:"687403057@qq.com",state:!0,group:"县区局->凤庆县"},{date:"2022-04-30",name:"王五",phone:"15390237220",mail:"682408056@qq.com",state:!1,group:"县区局->云县"},{date:"2022-04-23",name:"赵六",phone:"18600271382",mail:"120407853@qq.com",state:!0,group:"县区局->双江县"},{date:"2022-04-13",name:"王五五",phone:"15390237220",mail:"322408076@qq.com",state:!1,group:"水电站->南片河流域"},{date:"2022-03-23",name:"赵六六",phone:"18600271382",mail:"160487874@qq.com",state:!0,group:"水电站->南袜河流域"}],dialogStatus:"添加",dialogVisible:!1,form:{name:"",phone:"",mail:"",state:!0,group:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},groupName:""}},computed:{total:function(){return this.tableData.length}},mounted:function(){this.$bus.$on("setGroupData",this.setGroupData),this.$bus.$on("deleteTableData",this.deleteTableData)},created:function(){this.getData()},methods:{handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){console.log("当前页: ".concat(e))},getData:function(){var e=this;this.tableData=[],this.allData.forEach((function(t){t.name.includes(e.name)&&t.group.includes(e.groupName)&&e.tableData.push(t)}))},setGroupData:function(e){this.groupName=e,this.getData()},deleteTableData:function(e){var t=this;this.allData.forEach((function(a,l){a.group.includes(e)&&t.allData.splice(l,1)})),this.groupName="",this.getData()},handleFun:function(){if("添加"==this.dialogStatus){var e=this.form;e.date=Object(h["a"])(new Date,"yyyy-MM-dd"),this.allData.unshift(e),this.getData()}this.dialogVisible=!1},handleAdd:function(){""!=this.groupName?(this.form={name:"",phone:"",mail:"",state:!0,group:this.groupName},this.dialogVisible=!0):this.$message.error("请在左侧群组中选中要添加人员的群组")},handleEdit:function(e,t){this.form=t,this.dialogStatus="修改",this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){t.splice(e,1),a.$message.success("删除成功")}))}}},b=g,v=(a("c73b"),Object(u["a"])(b,m,f,!1,null,"5fcf1eff",null)),y=v.exports,$={components:{treeGroup:p,peopleGroup:y}},k=$,N=(a("6ee9"),Object(u["a"])(k,l,o,!1,null,"979d93f4",null));t["default"]=N.exports},"6ee9":function(e,t,a){"use strict";a("be58")},"9a41":function(e,t,a){"use strict";a("438b")},be58:function(e,t,a){},c73b:function(e,t,a){"use strict";a("0d02")},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o}));a("ac1f"),a("5319");function l(e,t){var a=t-e,l=Math.random(),o=e+Math.round(l*a);return o}function o(e,t){var a=e.getFullYear(),l=e.getMonth()+1,o=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),n=e.getDay(),c=function(e){return parseInt(e)>9?e:"0"+e},u=function(e){switch(e){case 0:return"周日";case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六"}};return t=t.replace("yyyy",a),t=t.replace("MM",c(l)),t=t.replace("dd",c(o)),t=t.replace("HH",c(r)),t=t.replace("mm",c(i)),t=t.replace("ss",c(s)),t=t.replace("ww",u(n)),t=t.replace("M",l),t=t.replace("d",o),t=t.replace("H",r),t=t.replace("m",i),t=t.replace("s",s),t=t.replace("w",n),t}}}]);