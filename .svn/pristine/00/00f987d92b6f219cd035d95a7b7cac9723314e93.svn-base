<template>
    <div class="content">
        <el-card class="box_card">
            <div class="header">
                <el-row>
                    <el-col :span="12">                           
                        <el-upload action="/"
                                accept=".txt"		
                                :show-file-list="false"	                      
                                :before-upload="beforeUpload"		                         
                                :file-list="fileList"
                                >
                                <el-button type="primary" size="medium">上传TXT文件</el-button>
                        </el-upload>
                    </el-col>
                    <el-col :span="12" style="text-align:right">
                        <el-button type="warning" size="medium" @click="downloadTxt">下载</el-button>
                        <el-button type="success" size="medium" @click="save">保存</el-button>
                    </el-col>
                </el-row>  
            </div>
            <el-input class="textareaClass" type="textarea" v-model="value" :autosize="{ minRows: 20}" placeholder="请输入内容"></el-input>
        </el-card>
    </div>
</template>
<script>
import { saveAs } from 'file-saver'
import {txtFileSetting} from "../../minx"
export default {
    name: "TxtEditor",
    props:{
        name:{
            type: String,
            default: "下载"
        }
    },
    data(){
        return{
           value: "",
           fileList: []
        }
    },
    mixins:[txtFileSetting],
    methods:{
        save(){//保存
            if(!this.value){
                this.$message.error("内容不能为空")
                return
            }
            this.$message.success("保存成功")
        },  
        downloadTxt() {//下载txt文件
            let str = this.value
            let strData = new Blob([str], { type: 'text/plain;charset=utf-8' });
            saveAs(strData, `${this.name}.txt`);
        },  
    },
}
</script>

<style lang="less" scoped>
.content{
    height: 100%;
    font-size: 14px;
    padding: 16px;
    & .box_card{
        height: 100%;
    }
    .header{
        padding-bottom: 20px;
    }
    .textareaClass{
        /deep/ textarea{
            resize:none;
            font-size: 18px;
        }
    }
}
</style>
